<!doctype html>
<html lang = "en" oncontextmenu = "return false;">
<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no, maximum-scale=1.0, user-scalable=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <link rel="stylesheet" href="style.css">
  <script src = "pixi/pixi.min.js"></script>
  <script src = "pixi/pixi-extra-filters.js"></script>
  <script src = "pixi/pixi-layers.js"></script>
  <script type="text/javascript">
  document.addEventListener('DOMContentLoaded', function() {
    var isIE = /*@cc_on!@*/false || !!document.documentMode;
    var isEdge = !isIE && !!window.StyleMedia;
    if(isIE || isEdge){
      var block_to_insert ;
      var container_block ;

      block_to_insert = document.createElement( 'div' );
      block_to_insert.innerHTML = '<div class="unsupportedBrowserAlertDIV alert alert-danger" role="alert"><p style="text-align:center;"<a href="#" class="alert-link">You are using an unsupported browser. Please use Mozilla Firefox or Google Chrome.</a></p></div>' ;

      container_block = document.getElementById( 'unsupportedBrowserAlert' );
      container_block.appendChild( block_to_insert );
    }
  }, false);
  </script>

  <title>User Profile</title>
</head>
<body class = "ctbody">
  <div id="unsupportedBrowserAlert">
  <!-- Datalists required for searching -->

  <datalist id="UserSearchResult"></datalist>
  <datalist id="TreeSearchResult"></datalist>
  <datalist id="skillSearchResult"></datalist>

  <!-- End of datalists -->

  <!-- navbar -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#userCard" data-toggle="collapse" role="button"data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" onclick="initCard()"><img class="logo" src="pictures/logo_32x32.png">SKILLTREE</a>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <a class="nav-link" id="home">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="openchart">Overview <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle"  id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            My SkillTrees
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown" id="treeList">
          </div>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle"  id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Editor
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" onclick = "createSkill()">Create Skill</a>
            <a class="dropdown-item" onclick = "addTraining()">Add Training Link</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" onclick = "createTree()" id = "openCreator">Create SkillTree</a>
          </div>
        </li>
        <li class="nav-item dropdown" id = "openAdminMenu" style = "display: none;">
          <a class="nav-link dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Admin</a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" onclick = "approveTrees()">Approve Trees</a>
            <a class="dropdown-item" onclick = "approveSkills()">Approve Skills</a>
            <a class="dropdown-item" onclick = "approveTrainings()">Approve Trainings</a>
            <a class="dropdown-item" onclick = "dropoffers()">Drop Offers</a>
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link" onclick="submit()">Submit Changes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" onclick="logout()">Logout</a>
        </li>
      </ul>
    </div>

    <a class="nav-link" href="#advSearch" data-toggle="collapse" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      Search
    </a>

    <a class="nav-link" href="#userprofile" data-toggle="collapse" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      <img src="./pictures/profile.png">
    </a>
  </nav>
  <!-- end of navbar -->

  <!-- start of advanced search -->
  <div class="collapse float-right" id="advSearch">
    <div class="card">
      <div class="card-body">
        <!-- card content -->
        <div class="tab-content" id="mySearchTabContent">
          <div class="btn-group btn-group-toggle" data-toggle="buttons" id="buttonGroup">
            <label class="btn btn-secondary active" onclick="switchSearch('User')">
              <input type="radio" name="options" id="option1" autocomplete="off" checked> User Search
            </label>
            <label class="btn btn-secondary" onclick="switchSearch('Tree')">
              <input type="radio" name="options" id="option2" autocomplete="off"> Tree Search
            </label>
            <label class="btn btn-secondary" onclick="switchSearch('Skill')">
              <input type="radio" name="options" id="option3" autocomplete="off"> Skill Search
            </label>
          </div>
          <div class="card" id="innerCard">
            <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search" id="cardSearchBar">
            <input class="btn btn-outline-success my-2 my-sm-0" type="submit" value="Search" id="cardSearch">
            <div class="card-body" id="advSearchDetails">
            </div>
          </div>
        </div>
        <!-- end of card content -->
      </div>
    </div>
  </div>
  <!-- end of advanced search -->

  <!-- user card  -->
  <div class="collapse float-left show" id="userCard">
    <div class="card">
      <div class="card-body">
        <img class="img-thumbnail float-left d-inline w-25 m-1 mr-3" src="./pictures/profile_img.jpg" alt="Card image cap">
        <h6 class="card-title d-inline" id="cardUserName"></h6>
        <h6 class="card-subtitle mb-2 small font-italic" id="cardMainTree"></h6>
      </div>

      <div class="card-body">
        <span class="badge badge-secondary w-30" id="treeCount"></span>
        <span class="badge badge-secondary w-30" id="skillCount"></span>
        <span class="badge badge-secondary w-30" id="pointCount"></span>
      </div>
    </div>
  </div>
  <!-- end of user cards -->

  <!-- user profile details card -->

  <div id="userprofile" class="collapse float-right">
    <div class="card text-white bg-success mb-3">
      <div class="card-header" id="card_username"></div>
      <div class="card-body">

        <!-- card nav -->

        <ul class="nav nav-tabs" id="myTab" role="tablist">
          <li class="nav-item">
            <a class="nav-link" id="personal-tab" data-toggle="tab" href="#personal" role="tab" aria-controls="personal" aria-selected="false">Personal</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="trainings-tab" data-toggle="tab" href="#trainings" role="tab" aria-controls="trainings" aria-selected="false">Peer Learning</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" id="skilltrees-tab" data-toggle="tab" href="#skilltrees" role="tab" aria-controls="skilltrees" aria-selected="true">Skilltrees</a>
          </li><!--
            <li class="nav-item">
            <a class="nav-link" id="statistics-tab" data-toggle="tab" href="#statistics" role="tab" aria-controls="statistics" aria-selected="false">Statistics</a>
          </li> -->
        </ul>



        <!-- end of card nav -->

        <!-- tab contents -->
        <div class="tab-content" id="myTabContent">

          <!-- personal-tab content -->

          <div class="tab-pane fade" id="personal" role="tabpanel" aria-labelledby="personal-tab">

            <form class="pt-4">
              <div class="form-group row">
                <label for="username" class="col-sm-3 col-form-label">User name</label>
                <div class="col-sm-9">
                  <input type="text" class="form-control" id="username" aria-describedby="emailHelp" placeholder="User name">
                </div>
              </div>
              <div class="form-group row">
                <label for="exampleInputEmail1" class="col-sm-3 col-form-label">Email</label>
                <div class="col-sm-9">
                  <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="user677@nokia.com">
                </div>
              </div>
              <div class="form-group row">
                <label for="exampleInputEmail1" class="col-sm-3 col-form-label">Your place</label>
                <div class="col-sm-9">
                  <input type="email" class="form-control" id="exampleInputEmail2" aria-describedby="emailHelp" placeholder="WhereAreYou link">
                </div>
              </div>
              <div class="form-group row">
                <label for="inputPassword" class="col-sm-3 col-form-label">Password</label>
                <div class="col-sm-9">
                  <input type="password" class="form-control" id="inputPassword" placeholder="****">
                </div>
              </div>
            </form>
          </div>

          <!-- skilltrees-tab content -->

          <div class="tab-pane fade show active" id="skilltrees" role="tabpanel" aria-labelledby="skilltrees-tab">
            <h5 class="pt-4" id="treeOperationTitle">Add existing trees</h5>
            <div class="form-inline my-2 my-lg-0">
              <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search" onkeyup="searchTreesByName()" list="TreeSearchResult" id="searchedTree">
              <input class="btn btn-outline-dark my-2 my-sm-0" type="submit" onclick="addTreeToUser()" value="Add!" id="addsearchedTree">
            </div>
          </div>

          <!-- statistics-tab content -->

          <div class="tab-pane fade" id="statistics" role="tabpanel" aria-labelledby="statistics-tab">
            ...
          </div>

          <!-- trainings-tab content -->

          <div class="tab-pane fade" id="trainings" role="tabpanel" aria-labelledby="trainings-tab">
            <h5>Your Requested Trainings</h5>
            <p>details about your requested trainings</p>

            <h5>Your Offered Trainings</h5>
            <p>details about your offered trainings</p>
            <p>days</p>
            <p>timeslot</p>
          </div>
        </div>
        <!-- end of tab contents -->
      </div>
    </div>
  </div>

<canvas id = "pixiCanvas" style = "visibility: hidden;"></canvas>

<!-- creator -->
<div id = "creator" style = "display: none;">
  <div class = "card">
    <h1>1.</h1>
    <center><h5>The name of the new tree</h5></center>
    <p><input type = "text" id = "treeName" class = "form-control"></p>
    <center><h5>Focus area of the new tree</h5></center>
    <p><select id = "focusarea" class = "form-control">
      <option value = "People">People</option>
      <option value = "Engineering">Engineering</option>
      <option value = "Business">Business</option>
      <option value = "Communication">Communication</option>
      <option value = "Support functions">Support functions</option>
    </select></p>
  </div>
  <div class = "card">
    <h1>2.</h1>
    <center><h5>Serch for a skill</h5></center>
    <p><input type = "text" id = "skillSearchTree" class = "form-control" list = "skillSearchResult" onkeyup="searchSkillsByName(this)"></p>
    <p><input type = "button" id = "addToTree" class="btn btn-outline-secondary" value = "Add skill to tree"></p>
    <center><h5>OR</h5></center>
    <p><input type = "button" id = "createSkill" class="btn btn-outline-secondary" value = "Create skill"></p>
  </div>
  <div class = "card">
    <h1>3.</h1>
    <p><select id = "skillList" size = "10"></select></p>
    <p><input type = "button" id = "deleteFromList" class="btn btn-outline-secondary" value = "Delete selected"></p>
  </div>
  <div class = "card">
    <h1>4.</h1>
    <p><input type = "checkbox" class = "form-check-input" id = "treeAppr"><label class = "form-check-label" for = "treeAppr" disabled>Send for approve</label></p>
    <p><input type = "button" id = "createTree" class="btn btn-outline-secondary" value = "Create tree"></p>
    </div>
  </div>
<!-- end of creator -->

<!-- start of modal -->
<div class="modal" id="userSearchModal">
  <div class="modal-content">
    <div class="modal-header">
      <span class="modalClose" id="closeSearchModal">&times;</span>
      <h2>Search Results</h2>
    </div>
    <div class="modal-body">
      <table class="table table-striped table-dark">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">First</th>
            <th scope="col">Last</th>
            <th scope="col">Handle</th>
          </tr>
        </thead>
        <tbody id="searchModalBody">
          <tr>
            <th scope="row">1</th>
            <td>Mark</td>
            <td>Otto</td>
            <td>@mdo</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
<!-- end of modal -->

  <!-- start of modal -->
  <div id = "newSkillModal" class = "modal">
    <div class = "modal-content">
      <div class="modal-header">
        <span class="modalClose" id = "closeSkillModal">&times;</span>
        <h2>Create your own skill</h2>
      </div>
      <div class="modal-body">
        <form onsubmit = "return false">
          <h5>Name:</h5>
          <input type = "text" id = "newSkillName" required><br>
          <h5>Description:</h5>
          <textarea id = "newSkillDesc" required></textarea><br>
          <h5>Icon:</h5>
          <input type = "text" id = "newSkillIcon" value = "pictures/icons/.png" required><br>
          <h5>Category:</h5>
          <select id = "newSkillCat"></select><br>
          <h5>Points:</h5>
          <table id = "pointsTable" border = "1">
            <tr>
              <td>Point</td>
              <td>Description</td>
              <td>Delete</td>
            </tr>
            <tr>
              <td>1</td>
              <td><input size=50 type="text" id = "pointDesc" required></td>
              <td><input type="button" value="Delete" onclick="deleteRow('pointsTable', this)"></td>
            </tr>
          </table>
          <input type="button" value="Add point" onclick="addRow('pointsTable')"><br>
          <h5>Parents:</h5>
          <table id = "parentsTable" border = "1">
            <tr>
              <td>Parent</td>
              <td>Min point</td>
              <td>Required</td>
              <td>Delete</td>
            </tr>
            <tr>
              <td><input size=30 type="text" id = "parent" list = "skillSearchResult" onkeyup="searchSkillsByName(this)" required></td>
              <td><input size=10 type="text" id = "minPoint" required></td>
              <td><input size=50 type="checkbox" id = "required"></td>
              <td><input type="button" value="Delete" onclick="deleteRow('parentsTable', this)"></td>
            </tr>
          </table>
          <input type="button" value="Add parent" onclick="addRow('parentsTable')"><br>
          <!--<h5>Children:</h5>
          <table id = "childrenTable" border = "1">
            <tr>
              <td>Child</td>
              <td>Min point</td>
              <td>Required</td>
              <td>Delete</td>
            </tr>
            <tr>
              <td><input size=30 type="text" id = "child" list = "skillSearchResult" onkeypress="searchSkillByName()" required></td>
              <td><input size=10 type="text" id = "minPoint" required></td>
              <td><input size=50 type="checkbox" id = "required"></td>
              <td><input type="button" value="Delete" onclick="deleteRow('childrenTable', this)"></td>
            </tr>
          </table>
          <input type="button" value="Add child" onclick="addRow('childrenTable')"><br>-->
          <h5>Trainings:</h5>
          <table id = "trainingsTable" border = "1">
            <tr>
              <td>Name</td>
              <td>Level</td>
              <td>Description</td>
              <td>URL</td>
              <td>Delete</td>
            </tr>
            <tr>
              <td><input size=30 type="text"></td>
              <td><input size=10 type="text"></td>
              <td><input size=30 type="text"></td>
              <td><input size=30 type="text"></td>
              <td><input type="button" value="Delete" onclick="deleteRow('trainingsTable', this)"></td>
            </tr>
          </table>
          <input type="button" value="Add training" onclick="addRow('trainingsTable')"><br><br>
          Send for approve:
          <input type = "checkbox" id = "forApprove"><br><br>
          <input type = "submit" value = "Save" id = "saveSkillBtn">
        </form>
      </div>
    </div>
  </div>
  <!-- end of modal -->

  <!-- start of modal -->
  <div id = "addTrainingModal" class = "modal">
    <div class = "modal-content">
      <div class="modal-header">
        <span class="modalClose" id = "closeTrainingModal">&times;</span>
        <h2>Add training to a skill</h2>
      </div>
      <div class="modal-body">
        <form onsubmit = "return false">
          <h5>Skill:</h5>
          <input type = "text" id = "trainingSkillName" list = "skillSearchResult" onkeyup="searchUserSkillsByName(this)" required><br>
          <h5>Trainings:</h5>
          <table id = "addTrainingsTable" border = "1">
            <tr>
              <td>Name</td>
              <td>Level</td>
              <td>Description</td>
              <td>URL</td>
              <td>Delete</td>
            </tr>
            <tr>
              <td><input size=30 type="text" required></td>
              <td><input size=10 type="text" required></td>
              <td><input size=30 type="text" required></td>
              <td><input size=30 type="text" required></td>
              <td><input type="button" value="Delete" onclick="deleteRow('addTrainingsTable', this)"></td>
            </tr>
          </table>
          <input type="button" value="Add training" onclick="addRow('addTrainingsTable')"><br><br>
          Send for approve:
          <input type = "checkbox" id = "trainingForApprove"><br><br>
          <input type = "submit" value = "Save" id = "saveTrainingsBtn">
        </form>
      </div>
    </div>
  </div>
  <!-- end of modal -->

  <!-- start of modal -->
  <div id = "firstLogin" class = "modal">
      <div class = "modal-content">
          <div class="modal-header">
              <h2>Set up your account</h2>
          </div>
          <div class="modal-body">
              <h4>Please select your main skill tree!</h4>
              <select id = "maintree"></select>
              <div id = "teachingSettings">
                  <br>
                  <h4>Please specify your availability for teaching!</h4>
                  On which day are you available for teching?
                  <select id = "day">
                     <option value = "Monday">Monday</option>
                     <option value = "Tuesday">Tuesday</option>
                     <option value = "Wednesday">Wednesday</option>
                     <option value = "Thursday">Thursday</option>
                     <option value = "Friday">Friday</option>
                  </select><br>
                  Timeslot when you are willing to teach on this day:
                  <input type = "time" id = "timeStart"> - <input type = "time" id = "timeEnd"><br>
                  Where can people find you?
                  <input type = "text" id = "location"><br>
             </div>
             <br>
             <input type = "button" value = "Save" id = "savebtn">
          </div>
      </div>
  </div>
  <!-- end of modal -->

  <!-- start of modal -->
  <div id = "skillinfopage" class = "modal">
      <div class = "modal-content">
          <div class="modal-header">
              <span class="modalClose" id = "closeInfoModal">&times;</span>
              <h2 id="infoSkillnameHeader"></h2>
          </div>
          <div class="modal-body">
              <p><span id = "imDesc"></span></p>
              <p><b>Wikipedia article:</b> <span id = "imWiki"></span></p>
              <p><b>Category:</b> <span id = "imCateg"></span></p>
              <p><b>Points (maximum: <span id = "imMaxPoint"></span>):</b> <span id = "imPoints"></span></p>
              <p><b>Parents:</b> <span id = "imParents"></span></p>
              <p><b>Children:</b> <span id = "imChildren"></span></p>
              <p><b>Trainings:</b></p>
              <span style = "margin-left: 20px" id = "imTrainings"></span>
          </div>
      </div>
  </div>
  <!-- end of modal -->

  <!-- start of modal -->
  <div id = "skillpage" class = "modal">
    <div class = "modal-content">
      <div class="modal-header">
        <span class="modalClose" id = "closeORModal">&times;</span>
        <h2 id="skillnameHeader"></h2>
      </div>
      <div class="modal-body">


        <div class = "divTable">
          <div class= "divTableCaption"></div>
          <div class="divTableBody" id = "trainingTableBody">
            <div class="divTableRow">

            </div>
          </div>

        </div>



        <div class = "divTable">
          <div class= "divTableCaption">Offers</div>
          <div class="divTableBody" id = "offerTableBody">
            <div class="divTableRow">
              <div class="divTableHead"> Username </div>
              <div class="divTableHead"> Location</div>
              <div class="divTableHead"> Day </div>
              <div class="divTableHead"> Time</div>
              <div class="divTableHead"> Skill Level</div>
            </div>
          </div>

        </div>



        <div class = "divTable">
          <div class= "divTableCaption">Request</div>
          <div class="divTableBody" id = requestTableBody>
            <div class="divTableRow">
              <div class="divTableHead"> Level </div>
              <div class="divTableHead"> Times requested </div>
              <div class="divTableHead"> Request </div>
            </div>
            <div class="divTableRow">
              <div class="divTableHead"> Beginner </div>
              <div class="divTableCell" id="beginnerCount"> People </div>
              <div class="divTableCell" id="addBeginnerCount"> + </div>

            </div>
            <div class="divTableRow">
              <div class="divTableHead"> Intermediate </div>
              <div class="divTableCell" id="intermediateCount"> People </div>
              <div class="divTableCell" id="addIntermediateCount">  + </div>

            </div>
            <div class="divTableRow">
              <div class="divTableHead"> Advanced </div>
              <div class="divTableCell" id="advancedCount"> People </div>
              <div class="divTableCell" id="addAdvancedCount"> + </div>

            </div>
        </div>

      </div>
    </div>
  </div>
  </div>
  <!-- end of modal -->


  <div class = "approve" id = "approveTrees" >
    <select id = "apprTreeSel">
    </select>
  </div>

  <div class = "approve" id = "approveSkills">
    <select id = "apprSkillSel">
    </select>
    <input type="button" value="Appprove" id="approvebtn">
  </div>

  <!-- Optional JavaScript -->

  <script src = "classes/link.js"></script>
  <script src = "classes/itemcontainer.js"></script>
  <script src = "classes/tree.js"></script>
  <script src = "chartandtree.js"></script>

  <!-- jQuery first, then Popper.js, then Bootstrap JS -->

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
</body>
</html>
